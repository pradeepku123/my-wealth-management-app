<div class="mutual-funds-container">
  <div class="header">
    <h1>My Mutual Funds (NAV)</h1>
    <div class="header-actions">
      <button mat-raised-button color="primary" (click)="refreshData()" [disabled]="loading">
        <mat-icon>refresh</mat-icon>
        {{ loading ? 'Loading...' : 'Refresh' }}
      </button>
    </div>
  </div>

  <div class="funds-container" *ngFor="let category of getCategories()">
    <h2 class="category-header">{{ category }}</h2>
    
    <div class="sub-category-container" *ngFor="let subCategory of getSubCategories(category)">
      <h3 class="sub-category-header">{{ subCategory }}</h3>
      
      <div class="funds-grid">
        <mat-card class="fund-card" *ngFor="let fund of getFundsInSubCategory(category, subCategory)">
          <mat-card-header>
            <mat-card-title class="fund-name">{{ getFundShortName(fund.scheme_name) }}</mat-card-title>
            <mat-card-subtitle>Code: {{ fund.scheme_code }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="fund-nav">â‚¹{{ fund.nav }}</div>
            <div class="fund-date">{{ fund.date }}</div>
            <div class="fund-house" *ngIf="fund.fund_house">{{ fund.fund_house }}</div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>

  <div *ngIf="mutualFunds.length === 0 && !loading" class="no-data">
    <mat-icon>info</mat-icon>
    <p>No mutual fund investments found. Add mutual fund investments in Portfolio to see NAV data here.</p>
  </div>
</div>